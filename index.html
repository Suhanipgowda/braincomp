<!DOCTYPE html>
<html>
<head>
    <title>EEG Live Web Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body style="font-family: Arial; padding: 20px;">
    <h1>ðŸ§  EEG Live Web Graph</h1>

    <!-- Hyperlinks to start and stop simulation -->
    <a href="http://127.0.0.1:8000/start" target="_blank">Start Simulation</a><br>
    <a href="http://127.0.0.1:8000/stop" target="_blank">Stop Simulation</a><br>
    <a href="http://127.0.0.1:8000/set_activity/rest" target="_blank">Set Activity to Rest</a><br>
    <a href="http://127.0.0.1:8000/set_activity/walking" target="_blank">Set Activity to Walking</a><br>
    <a href="http://127.0.0.1:8000/set_activity/running" target="_blank">Set Activity to Running</a><br>

    <canvas id="eegChart" width="600" height="300"></canvas>

    <script>
        const api = "127.0.0.1:8000"; // Replace with your backend URL if necessary

        // Set up the EEG graph with Chart.js
        const ctx = document.getElementById("eegChart").getContext("2d");
        const chart = new Chart(ctx, {
            type: "line",
            data: {
                labels: [],
                datasets: [
                    { label: "Alpha", data: [], borderColor: "yellow" },
                    { label: "Beta", data: [], borderColor: "red" },
                    { label: "Gamma", data: [], borderColor: "green" }
                ]
            }
        });

        // Update the graph with real-time data every 200 ms
        setInterval(async () => {
            const res = await fetch(api + "/eeg");
            const data = await res.json();

            chart.data.labels.push("");  // Add a new empty label for each data point
            chart.data.datasets[0].data.push(data.alpha);  // Alpha data
            chart.data.datasets[1].data.push(data.beta);   // Beta data
            chart.data.datasets[2].data.push(data.gamma);  // Gamma data

            if (chart.data.labels.length > 100) {  // Limit graph data length
                chart.data.labels.shift();
                chart.data.datasets.forEach(d => d.data.shift());
            }

            chart.update();
        }, 200);
    </script>
</body>
</html>
